# RAILSCLUB 2014 (http://railsclub.ru)

Agenda

* Что такое архитектура?
* Зачем она нужна?
* Архитектур много !?
* Что такое архитектурный стиль?
* Системное мышление - закон чередования
* Tradeoffs
* Примеры стилей
  * pipeline (rack, *nix utils)
  * client/service
  * слоистая архитектура
  * микросервисы
* Архитектура rails
  * REST
  * models
  * scale?
* UseCase layer
  * workflow
  * specification
  * model twice
  * evolution
* Shu-Ha-Ri
* Evolutionary architecture - one file


## Spb

Особенностями архитектуры Санкт-Петербурга являются продуманная регулярность застройки, соразмерность городских ансамблей, учёт влияния неброской природной среды, гармоничная полифония различных архитектурных стилей, сочетание регионального и столичного менталитета, вовлечение загородных анклавов в единую агломерацию.

### &#9786;

## Что такое архитектура?

Вопрос в зал - что такое архитектура информационных систем?

У вас 15 секунд, чтобы понять, что скорее всего вы не имеете ясного представления
об этом понятии. И действительно даже эксперты не могут прийти к единому мнению.

Мы воспользуемся определениеи из диссертации Роя Филдинга -- [Architectural Styles and
the Design of Network-based Software Architectures](http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm).

> Архитектура - это абстракция/модель реальной системы.
> Архитектура - это разбиение системы на части - компоненты, связи и взаимодейсвтия (данные)
> и наложение ограничений на эти части, с целью достижения желаемых свойств системы

Свойства могут быть функциональными (надежность, быстродействие) 
и нефункциональными (атрибуты качества: расширяемость, легкая разработка).

Многие не различают описание системы и абстракцию. 
Но если даже план жилого здания был утерят, 
оно не перестает от этого служить своим целям.


# Зачем нужна архитектура?

Все дело в том, что возможности человека сильно ограничены.
Например, размер [рабочей памяти](http://en.wikipedia.org/wiki/Working_memory)
человека ограничен 3-4 сущностями.
Когда-то думали что 7, но исследования показали, что мы лукавим, используя
группировку - так называемый chanking.

В итоге нашим основным врагом является сложность, c которую 
мы вынуждены бороться. Одим из средств борьбы является абстракция
- когда мы выделяем существенные характеристики и отбрасываем детали -
- создавая упрощенную модель достаточную для решения задачи.

# Архитектур много

Дополнительной сложностью является то, что у приложения нет одной архитектуры.
Архитектур много! Например на каждом уровне компонент, может быть предстален как
подсистема со своей архитектурой. Также в зависимости от фазы, в которой находиться система,
архитектурная перспектива может быть разной. 

Когда мы деплоим или конфигурируем приложение мы пользуемся
совершенно иной моделью (app-servers, daemons/jobs, assets), нежели, когда система функционирует.

Более того, архитектура эволюционирует - появляются новые требования и 
система меняется в соответствии с ними.

Итак архитектур много!

### Интересный факт. 

Наблюдая биологические системы советский биолог Александр Александрович Малиновский выделил два типа систем:
  * копускулярные (дискретные) системы состоящии из подобных элементов способных взаимодействовать друг с другом в любых комбинациях
  * жесткие системы - состоящии из специализированных компонентов, жестко связанных друг с другом

Он заметил, что при движении из микро-мира в сторону макро-систем наблюдается устойчивое чередование типов систем.

* Вид или общество состоит из подобных особей, практически без ограничений на взаимодействия
* Однако индивид состоит из сильно специализированных и определенным образом связанных органов и систем
* В свою очередь органы в основном состоят из однотипных клеток, обменивающихся стандарнтыми химическими и электрическими сообщениями
* Клетки имеют сложную структуру со множеством сильно специализированных органел
* Органелы состоят из небольшого количества классов химических соединений - белки, жирки и углеводы - те мы опять имеем дело с гомогенной системой
* Молекулы состоят из сильно отличающихся друг от друга атомов
* которые состоят всего лишь из электронов и ядра

Если применить это наблюдение к нашей области:

* web - дискретная система из однотипных элементов (серверов и клиентов)
* app - должно быть жесткой системой
* OOP or FP - объекты или функции единообразные сущности
* language - уникальные языки
* сpu & binary - память, байтики и инструкции

# Что такое архитектурный стиль?

Архитектура - это всегда архитектура конкретного приложения.
Поэтому если мы хотим обсуждать архитектуру в общем виде, следует говорить про 
архитектурные стили.

> Архитектурный стиль это определенный способ выделить компоненты и наложить
> на них ограничения, для достижения определенных свойств системы

Архитектурные стили могут смешиваться в архитектуре конкретной системы образуя гибриды.
Но к сожалению не все стили и как следствия желаемые свойства совместимы.
Например, гибкость/расширяемость - простота/скорость разработки или всем известная CAP теорема.

Существует подход позволяющий осознанно сделать этот выбор - design tradeoffs.

Поэтому инженер вынужден делать осознанный или не осознанный выбор, понимая от чего он отказывается.

Выбирая модную монгу, вы отказываетесь от сложных транзакций и автоматической поддержки 
целостности данных,более мощного языка запросов.

Некоторые противоречия не фундаментальны и разрешаются прогрессом.

Несколько примеров архитектурных стилей:

### pipline
### layared architecture
### micro-services


  * слоистая архитектура
  * микросервисы
* Архитектура rails
  * REST
  * models
  * scale?
* UseCase layer
  * workflow
  * specification
  * model twice
  * evolution
* Shu-Ha-Ri
* Evolutionary architecture - one file
